import{a as F,u as R,t as l,c as x,s as c,b as $,q as j,o as a,d as o,e as i,y as g,v as N,F as V,f as B,i as u,j as d,l as _,x as p,g as q}from"./index-2dc1523e.js";import"./browser-ponyfill-2fa155e1.js";const D={class:"c-fellowship"},S={class:"invite"},E={class:"friends"},L={class:"info"},T=["src"],U={class:"username"},z={key:0,class:"actions"},A=i("div",{class:"awaiting-approval"},"awaiting approval",-1),G={key:1,class:"actions"},K={__name:"Fellowship",setup(H){const v=F(),y=R(),n=c,w=l(n,"user"),k=l(n,"friends"),h=l(n,"friendRequests"),b=x(()=>{var e;return`https://there-and-back-again.rash.codes/fellowship?request-user=${(e=w.value)==null?void 0:e.id}`});function f(e){return h.value.find(s=>s.from_id===e.id&&s.accepted===!1)?"incoming":h.value.find(s=>s.to_id===e.id&&s.accepted===!1)?"outgoing":"accepted"}return async function(){if(v.query["request-user"])try{await c.sendFellowshipRequest(v.query["request-user"])}catch(e){console.error(e)}finally{y.replace({query:{}})}}(),(e,s)=>{const r=$("bunt-button"),C=j("scrollbar");return a(),o("div",D,[i("div",S,g(b.value),1),N((a(),o("div",E,[(a(!0),o(V,null,B(k.value,t=>(a(),o("div",{class:"friend",key:t.id},[i("div",L,[i("img",{class:"avatar",src:t.avatar_url},null,8,T),i("div",U,g(t.username),1)]),f(t)==="outgoing"?(a(),o("div",z,[A,u(r,{id:"btn-reject-request",onClick:m=>p(c).deleteFellowshipRequest(t)},{default:d(()=>[_("cancel")]),_:2},1032,["onClick"])])):q("",!0),f(t)==="incoming"?(a(),o("div",G,[u(r,{id:"btn-reject-request",onClick:m=>p(c).deleteFellowshipRequest(t)},{default:d(()=>[_("reject")]),_:2},1032,["onClick"]),u(r,{id:"btn-accept-request",onClick:m=>p(c).acceptFellowshipRequest(t)},{default:d(()=>[_("accept")]),_:2},1032,["onClick"])])):q("",!0)]))),128))])),[[C,,void 0,{y:!0}]])])}}};export{K as default};
