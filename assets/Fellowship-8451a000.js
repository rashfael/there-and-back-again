import{a as F,u as R,t as l,c as x,s as c,b as $,q as j,o as s,d as a,e as i,y as g,v as N,F as V,f as B,i as u,j as d,l as _,x as p,g as q}from"./index-054200aa.js";import"./browser-ponyfill-2fa155e1.js";const D={class:"c-fellowship"},S={class:"invite"},E={class:"friends"},L={class:"info"},T=["src"],U={class:"username"},z={key:0,class:"actions"},A=i("div",{class:"awaiting-approval"},"awaiting approval",-1),G={key:1,class:"actions"},K={__name:"Fellowship",setup(H){const v=F(),y=R(),n=c,w=l(n,"user"),k=l(n,"friends"),h=l(n,"friendRequests"),b=x(()=>`https://there-and-back-again.rash.codes/fellowship?request-user=${w.value?.id}`);function f(o){return h.value.find(t=>t.from_id===o.id&&t.accepted===!1)?"incoming":h.value.find(t=>t.to_id===o.id&&t.accepted===!1)?"outgoing":"accepted"}return async function(){if(v.query["request-user"])try{await c.sendFellowshipRequest(v.query["request-user"])}catch(o){console.error(o)}finally{y.replace({query:{}})}}(),(o,t)=>{const r=$("bunt-button"),C=j("scrollbar");return s(),a("div",D,[i("div",S,g(b.value),1),N((s(),a("div",E,[(s(!0),a(V,null,B(k.value,e=>(s(),a("div",{class:"friend",key:e.id},[i("div",L,[i("img",{class:"avatar",src:e.avatar_url},null,8,T),i("div",U,g(e.username),1)]),f(e)==="outgoing"?(s(),a("div",z,[A,u(r,{id:"btn-reject-request",onClick:m=>p(c).deleteFellowshipRequest(e)},{default:d(()=>[_("cancel")]),_:2},1032,["onClick"])])):q("",!0),f(e)==="incoming"?(s(),a("div",G,[u(r,{id:"btn-reject-request",onClick:m=>p(c).deleteFellowshipRequest(e)},{default:d(()=>[_("reject")]),_:2},1032,["onClick"]),u(r,{id:"btn-accept-request",onClick:m=>p(c).acceptFellowshipRequest(e)},{default:d(()=>[_("accept")]),_:2},1032,["onClick"])])):q("",!0)]))),128))])),[[C,,void 0,{y:!0}]])])}}};export{K as default};
