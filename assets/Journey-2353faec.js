import{r as h,b,o as s,c as r,d as e,h as f,g as _,j as v,i as d,A as g,f as k,e as y,s as w,x as u,F as m,q as C,B as p,v as $,T as P}from"./index-f5fbc739.js";import{S as D}from"./Scrollbars-ad89398e.js";const A={__name:"Prompt",props:{allowCancel:{type:Boolean,default:!0}},emits:["close"],setup(n,{emit:a}){const l=h(null);function c(t){this.allowCancel&&(t.stopPropagation(),l.value.addEventListener("pointerup",i))}function i(t){l.value.removeEventListener("pointerup",i),t.target===l.value&&a("close")}return(t,o)=>{const j=b("bunt-icon-button");return s(),r("div",{class:"c-prompt",ref_key:"el",ref:l,onPointerdown:c},[e("div",{class:"prompt-wrapper",ref:"wrapper",onPointerdown:o[1]||(o[1]=k(()=>{},["stop"]))},[n.allowCancel?(s(),f(j,{key:0,id:"btn-close",onClick:o[0]||(o[0]=X=>t.$emit("close"))},{default:_(()=>[v("close")]),_:1})):d("",!0),g(t.$slots,"default",{class:"content"})],544)],544)}}};const B={class:"content"},x=e("h2",null,"Abort your journey and start a new one?",-1),J={class:"actions"},F={__name:"AbortJourneyPrompt",emits:["close"],setup(n,{emit:a}){async function l(){await w.abortActiveJourney(),a("close")}return(c,i)=>{const t=b("bunt-button");return s(),f(A,{class:"c-cancel-journey-prompt",onClose:i[1]||(i[1]=o=>a("close"))},{default:_(()=>[e("div",B,[x,e("div",J,[y(t,{id:"btn-continue",onClick:i[0]||(i[0]=o=>a("close"))},{default:_(()=>[v("Continue journey")]),_:1}),y(t,{id:"btn-cancel-journey",onClick:l},{default:_(()=>[v("Abort journey")]),_:1})])])]),_:1})}}};const N={class:"journey"},S={class:"text"},V={class:"name"},q={class:"description"},E={class:"da-container"},L={key:0,class:"actions"},T={class:"distances"},z={class:"travelled"},O=e("span",null,"/",-1),M={class:"total"},G={class:"journey-legs"},H={class:"path-segment"},I=e("div",{class:"waypoint"},null,-1),K={class:"content"},Q={class:"waypoint-info"},R={class:"directions"},U={class:"distance"},W={key:0,class:"quote"},ee={__name:"Journey",props:{journey:Object,user:Object,travelledDistance:Number,readonly:Boolean},setup(n){let a=h(!1);return(l,c)=>{const i=b("bunt-icon-button");return s(),r("div",{class:p(["c-journey",{readonly:n.readonly}])},[e("div",N,[e("div",S,[e("h3",V,u(n.journey.name),1),e("div",q,u(n.journey.description),1)]),e("div",E,[n.readonly?d("",!0):(s(),r("div",L,[y(i,{id:"btn-abort-journey",onClick:c[0]||(c[0]=t=>a.value=!0)},{default:_(()=>[v("sign-direction-remove")]),_:1})])),e("div",T,[e("div",z,u((n.travelledDistance/1e3).toFixed(2))+" km",1),O,e("div",M,u((n.journey.totalDistance/1e3).toFixed(2))+" km",1)])])]),y(D,{class:"journey-legs-scroller",y:""},{default:_(()=>[e("div",G,[(s(!0),r(m,null,C(n.journey.legs,(t,o)=>(s(),r(m,null,[t.show?(s(),r("div",{key:0,class:p(["journey-leg",{start:o===0,end:o===n.journey.legs.length-1,reached:t.remainingDistance===0}])},[e("div",H,[I,n.journey.legs[o+1].show?(s(),r(m,{key:0},[n.journey.legs[o+1].remainingDistance>0?(s(),r("div",{key:0,class:"path partial",style:$({"--remaining":n.journey.legs[o+1].remainingDistance/n.journey.legs[o+1].distance})},null,4)):d("",!0),e("div",{class:p(["path",{remaining:n.journey.legs[o+1].remainingDistance>0}])},null,2)],64)):d("",!0)]),e("div",K,[e("div",Q,[e("div",R,u(t.directions),1),e("div",U,u((t.distance/1e3).toFixed(2))+" km",1)]),t.remainingDistance===0?(s(),r("div",W,u(t.quote),1)):d("",!0)])],2)):d("",!0)],64))),256))])]),_:1}),y(P,{name:"prompt"},{default:_(()=>[a.value?(s(),f(F,{key:0,onClose:c[1]||(c[1]=t=>a.value=!1)})):d("",!0)]),_:1})],2)}}};export{ee as _};
