import{o as d,c as m,d as g,A as $,F as R,q as P,B as L,v as M}from"./index-f5fbc739.js";var _=function(){if(typeof Map<"u")return Map;function t(e,n){var i=-1;return e.some(function(s,r){return s[0]===n?(i=r,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var i=t(this.__entries__,n),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(n,i){var s=t(this.__entries__,n);~s?this.__entries__[s][1]=i:this.__entries__.push([n,i])},e.prototype.delete=function(n){var i=this.__entries__,s=t(i,n);~s&&i.splice(s,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var s=0,r=this.__entries__;s<r.length;s++){var o=r[s];n.call(i,o[1],o[0])}},e}()}(),v=typeof window<"u"&&typeof document<"u"&&window.document===document,u=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),T=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(u):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),z=2;function S(t,e){var n=!1,i=!1,s=0;function r(){n&&(n=!1,t()),i&&h()}function o(){T(r)}function h(){var c=Date.now();if(n){if(c-s<z)return;i=!0}else n=!0,i=!1,setTimeout(o,e);s=c}return h}var D=20,C=["top","right","bottom","left","width","height","size","weight"],A=typeof MutationObserver<"u",H=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=S(this.refresh.bind(this),D)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,i=n.indexOf(e);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!v||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),A?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!v||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,i=n===void 0?"":n,s=C.some(function(r){return!!~i.indexOf(r)});s&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),w=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},a=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||u},O=f(0,0,0,0);function l(t){return parseFloat(t)||0}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(i,s){var r=t["border-"+s+"-width"];return i+l(r)},0)}function W(t){for(var e=["top","right","bottom","left"],n={},i=0,s=e;i<s.length;i++){var r=s[i],o=t["padding-"+r];n[r]=l(o)}return n}function B(t){var e=t.getBBox();return f(0,0,e.width,e.height)}function N(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return O;var i=a(t).getComputedStyle(t),s=W(i),r=s.left+s.right,o=s.top+s.bottom,h=l(i.width),c=l(i.height);if(i.boxSizing==="border-box"&&(Math.round(h+r)!==e&&(h-=y(i,"left","right")+r),Math.round(c+o)!==n&&(c-=y(i,"top","bottom")+o)),!F(t)){var p=Math.round(h+r)-e,b=Math.round(c+o)-n;Math.abs(p)!==1&&(h-=p),Math.abs(b)!==1&&(c-=b)}return f(s.left,s.top,h,c)}var k=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof a(t).SVGGraphicsElement}:function(t){return t instanceof a(t).SVGElement&&typeof t.getBBox=="function"}}();function F(t){return t===a(t).document.documentElement}function G(t){return v?k(t)?B(t):N(t):O}function j(t){var e=t.x,n=t.y,i=t.width,s=t.height,r=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(r.prototype);return w(o,{x:e,y:n,width:i,height:s,top:n,right:e+i,bottom:s+n,left:e}),o}function f(t,e,n,i){return{x:t,y:e,width:n,height:i}}var I=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=f(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=G(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),q=function(){function t(e,n){var i=j(n);w(this,{target:e,contentRect:i})}return t}(),V=function(){function t(e,n,i){if(this.activeObservations_=[],this.observations_=new _,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof a(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new I(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof a(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new q(i.target,i.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),E=typeof WeakMap<"u"?new WeakMap:new _,x=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=H.getInstance(),i=new V(e,n,this);E.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){x.prototype[t]=function(){var e;return(e=E.get(this))[t].apply(e,arguments)}});var Y=function(){return typeof u.ResizeObserver<"u"?u.ResizeObserver:x}();const X={class:"c-scrollbars"},K=["onPointerdown"];function U(t,e,n,i,s,r){return d(),m("div",X,[g("div",{class:"scroll-content",ref:"content",onScroll:e[0]||(e[0]=(...o)=>r.onScroll&&r.onScroll(...o))},[$(t.$slots,"default")],544),(d(!0),m(R,null,P(Object.keys(s.dimensions),o=>(d(),m("div",{class:L([`scrollbar-rail-${o}`,{active:s.draggingDimension===o}]),onPointerdown:h=>r.onPointerdown(o,h)},[g("div",{class:"scrollbar-thumb",ref_for:!0,ref:`thumb-${o}`,style:M(r.thumbStyles[o])},null,4)],42,K))),256))])}const J=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},Q={components:{},props:{y:Boolean,x:Boolean},data(){return{dimensions:null,draggingDimension:null,draggingOffset:null}},computed:{thumbStyles(){const t={};if(this.dimensions?.x&&(t.x={width:this.dimensions.x.thumbLength+"px",left:this.dimensions.x.thumbPosition+"px"},this.dimensions.x.visibleRatio>=1&&(t.x.display="none")),this.dimensions?.y){const e=this.dimensions.y.direction==="reverse"?"bottom":"top";t.y={height:this.dimensions.y.thumbLength+"px",[e]:this.dimensions.y.thumbPosition+"px"},this.dimensions.y.visibleRatio>=1&&(t.y.display="none")}return t}},created(){const t={};this.x&&(t.x={visibleRatio:null,thumbLength:null,thumbPosition:null}),this.y&&(t.y={visibleRatio:null,thumbLength:null,thumbPosition:null,direction:null}),this.dimensions=t},async mounted(){await this.$nextTick(),this.dimensions.y&&window.getComputedStyle(this.$refs.content).flexDirection.endsWith("reverse")&&(this.dimensions.y.direction="reverse"),this.computeDimensions(),this.computeThumbPositions(),this.resizeObserver=new Y(this.onResize),this.resizeObserver.observe(this.$refs.content);for(const t of this.$refs.content.children)this.resizeObserver.observe(t);this.mutationObserver=new MutationObserver(t=>{for(const e of t){for(const n of e.addedNodes)n.nodeType===Node.ELEMENT_NODE&&this.resizeObserver.observe(n);for(const n of e.removedNodes)n.nodeType===Node.ELEMENT_NODE&&this.resizeObserver.unobserve(n)}this.onResize()}),this.mutationObserver.observe(this.$refs.content,{childList:!0})},beforeDestroy(){this.resizeObserver.disconnect(),this.mutationObserver.disconnect()},methods:{scrollTop(t){this.$refs.content.scrollTop=t},onScroll(t){this.$emit("scroll",t),this.computeThumbPositions()},onResize(){this.computeDimensions(),this.computeThumbPositions(),this.$emit("resize")},onPointerdown(t,e){const n=this.$refs[`thumb-${t}`][0];event.stopPropagation(),n.setPointerCapture(event.pointerId),this.draggingDimension=t,this.draggingOffset=event[`offset${t.toUpperCase()}`],n.addEventListener("pointermove",this.onPointermove),n.addEventListener("pointerup",this.onPointerup)},onPointermove(){if(this.draggingDimension==="x"){const t=this.$refs.content.clientWidth-this.dimensions.x.thumbLength,e=event.clientX-this.$refs.content.getBoundingClientRect().left-this.draggingOffset;this.dimensions.x.thumbPosition=Math.min(Math.max(0,e),t),this.$refs.content.scrollLeft=this.dimensions.x.thumbPosition/t*(this.$refs.content.scrollWidth-this.$refs.content.clientWidth)}if(this.draggingDimension==="y"){const t=this.$refs.content.clientHeight-this.dimensions.y.thumbLength;if(this.dimensions.y.direction==="reverse"){const e=this.$refs.content.clientHeight-(event.clientY-this.$refs.content.getBoundingClientRect().top+(this.dimensions.y.thumbLength-this.draggingOffset));this.dimensions.y.thumbPosition=Math.min(Math.max(0,e),t),this.$refs.content.scrollTop=-1*this.dimensions.y.thumbPosition/t*(this.$refs.content.scrollHeight-this.$refs.content.clientHeight)}else{const e=event.clientY-this.$refs.content.getBoundingClientRect().top-this.draggingOffset;this.dimensions.y.thumbPosition=Math.min(Math.max(0,e),t),this.$refs.content.scrollTop=this.dimensions.y.thumbPosition/t*(this.$refs.content.scrollHeight-this.$refs.content.clientHeight)}}},onPointerup(t){const e=this.draggingDimension,n=this.$refs[`thumb-${e}`][0];this.draggingDimension=null,n.releasePointerCapture(t.pointerId),n.removeEventListener("pointermove",this.onPointermove),n.removeEventListener("pointerup",this.onPointerup)},computeDimensions(){this.dimensions.x&&(this.dimensions.x.visibleRatio=this.$refs.content.clientWidth/this.$refs.content.scrollWidth,this.dimensions.x.thumbLength=this.$refs.content.clientWidth*this.dimensions.x.visibleRatio),this.dimensions.y&&(this.dimensions.y.visibleRatio=this.$refs.content.clientHeight/this.$refs.content.scrollHeight,this.dimensions.y.thumbLength=this.$refs.content.clientHeight*this.dimensions.y.visibleRatio)},computeThumbPositions(){this.dimensions.x&&(this.dimensions.x.thumbPosition=this.$refs.content.scrollLeft/(this.$refs.content.scrollWidth-this.$refs.content.clientWidth)*(this.$refs.content.clientWidth-this.dimensions.x.thumbLength)),this.dimensions.y&&(this.dimensions.y.direction==="reverse"?this.dimensions.y.thumbPosition=-1*this.$refs.content.scrollTop/(this.$refs.content.scrollHeight-this.$refs.content.clientHeight)*(this.$refs.content.clientHeight-this.dimensions.y.thumbLength):this.dimensions.y.thumbPosition=this.$refs.content.scrollTop/(this.$refs.content.scrollHeight-this.$refs.content.clientHeight)*(this.$refs.content.clientHeight-this.dimensions.y.thumbLength))},updateThumb(t){const e=this[t];e&&(e.visibleRatio>=1?e.thumbEl.style.display="none":(e.thumbEl.style.display=null,t==="x"?(e.railEl.style.width=e.railLength+"px",e.thumbEl.style.width=e.thumbLength+"px",e.thumbEl.style.left=e.thumbPosition+"px"):t==="y"&&(e.railEl.style.height=e.railLength+"px",e.thumbEl.style.height=e.thumbLength+"px",e.thumbEl.style.top=e.thumbPosition+"px")))}}},tt=J(Q,[["render",U]]);export{tt as S};
