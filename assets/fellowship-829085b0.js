import{a as x,u as $,t as u,k as j,s as a,b as k,m as B,o as s,c as n,d as c,x as g,n as N,F as V,q as D,h as S,g as i,e as d,j as _,p,i as q}from"./index-f5fbc739.js";import"./browser-ponyfill-2fa155e1.js";const E={class:"c-fellowship"},I={class:"invite"},L={class:"friends"},T={class:"info"},U=["src"],z={class:"username"},A={key:0,class:"actions"},G=c("div",{class:"awaiting-approval"},"awaiting approval",-1),H={key:1,class:"actions"},O={__name:"fellowship",setup(J){const v=x(),w=$(),r=a,y=u(r,"user"),b=u(r,"friends"),h=u(r,"friendRequests"),C=j(()=>`https://there-and-back-again.rash.codes/fellowship?request-user=${y.value?.id}`);function f(o){return h.value.find(t=>t.from_id===o.id&&t.accepted===!1)?"incoming":h.value.find(t=>t.to_id===o.id&&t.accepted===!1)?"outgoing":"accepted"}return async function(){if(v.query["request-user"])try{await a.sendFellowshipRequest(v.query["request-user"])}catch(o){console.error(o)}finally{w.replace({query:{}})}}(),(o,t)=>{const l=k("bunt-button"),R=k("router-link"),F=B("scrollbar");return s(),n("div",E,[c("div",I,g(C.value),1),N((s(),n("div",L,[(s(!0),n(V,null,D(b.value,e=>(s(),S(R,{class:"friend",key:e.id,to:{name:"friend",params:{friendId:e.id}}},{default:i(()=>[c("div",T,[c("img",{class:"avatar",src:e.avatar_url},null,8,U),c("div",z,g(e.username),1)]),f(e)==="outgoing"?(s(),n("div",A,[G,d(l,{id:"btn-reject-request",onClick:m=>p(a).deleteFellowshipRequest(e)},{default:i(()=>[_("cancel")]),_:2},1032,["onClick"])])):q("",!0),f(e)==="incoming"?(s(),n("div",H,[d(l,{id:"btn-reject-request",onClick:m=>p(a).deleteFellowshipRequest(e)},{default:i(()=>[_("reject")]),_:2},1032,["onClick"]),d(l,{id:"btn-accept-request",onClick:m=>p(a).acceptFellowshipRequest(e)},{default:i(()=>[_("accept")]),_:2},1032,["onClick"])])):q("",!0)]),_:2},1032,["to"]))),128))])),[[F,,void 0,{y:!0}]])])}}};export{O as default};
