import{u as M,a as N,t as v,r as c,w as S,b as a,o as u,c as _,d as r,e,f as Y,g as s,F as f,h as R,i as T,j as y,s as V}from"./index-6feeac89.js";import{h as w}from"./moment-fbc5633a.js";import{_ as A}from"./Map-11d10475.js";import"./browser-ponyfill-2fa155e1.js";const H={class:"c-tracker"},$={class:"sidebar"},I=["onSubmit"],J=["src"],O=r("div",{id:"bunt-teleport-target"},null,-1),Q={__name:"index",setup(q){const h=M(),k=N(),p=V,b=v(p,"user"),g=v(p,"activeJourney");let d=c(!1),l=c(k.name),t=c(null);function x(){d.value=!0,t.value={date:w().format("YYYY-MM-DDTHH:mm"),distance:0,mode:"walk",comment:""}}async function E(){await V.createEntry({...t.value,date:w(t.value.date).toISOString()}),d.value=!1}return S(()=>l.value,()=>{h.push({name:l.value})}),(z,o)=>{const m=a("bunt-input"),j=a("bunt-select"),C=a("bunt-button"),i=a("bunt-tab"),U=a("bunt-tabs"),B=a("router-view"),D=a("bunt-icon-button"),F=a("router-link");return u(),_(f,null,[r("div",H,[e(A,{journey:g.value,user:b.value},null,8,["journey","user"]),r("div",$,[d.value?(u(),_("form",{key:0,class:"add-entry",onSubmit:Y(E,["prevent"])},[e(m,{modelValue:t.value.distance,"onUpdate:modelValue":o[0]||(o[0]=n=>t.value.distance=n),name:"distance",label:"Distance",type:"number",hint:"in meters"},null,8,["modelValue"]),e(m,{modelValue:t.value.date,"onUpdate:modelValue":o[1]||(o[1]=n=>t.value.date=n),name:"date",label:"Date",type:"datetime-local",placeholder:" "},null,8,["modelValue"]),e(j,{modelValue:t.value.mode,"onUpdate:modelValue":o[2]||(o[2]=n=>t.value.mode=n),name:"mode",label:"Mode",options:["walk","ride","run","swim","horse"]},null,8,["modelValue"]),e(m,{modelValue:t.value.comment,"onUpdate:modelValue":o[3]||(o[3]=n=>t.value.comment=n),name:"comment",label:"Comment"},null,8,["modelValue"]),e(C,{id:"btn-create-entry",type:"submit"},{default:s(()=>[y("Create Entry")]),_:1})],40,I)):(u(),_(f,{key:1},[e(U,{modelValue:l.value,"onUpdate:modelValue":o[4]||(o[4]=n=>l.value=n)},{default:s(()=>[e(i,{id:"journey",header:"journey"}),e(i,{id:"log",header:"log"}),e(i,{id:"fellowship",header:"fellowship"})]),_:1},8,["modelValue"]),e(B)],64)),l.value!=="fellowship"?(u(),R(D,{key:2,id:"btn-add-entry",onClick:x},{default:s(()=>[y("plus")]),_:1})):T("",!0)]),e(F,{class:"profile-link",to:{name:"profile"}},{default:s(()=>[r("img",{src:b.value.profile.avatar_url},null,8,J)]),_:1})]),O],64)}}};export{Q as default};
